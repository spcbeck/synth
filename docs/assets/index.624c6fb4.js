(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function G(){}function fe(e){return e()}function Z(){return Object.create(null)}function B(e){e.forEach(fe)}function V(e){return typeof e=="function"}function I(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function de(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function L(){return D(" ")}function b(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function me(e){return Array.from(e.childNodes)}function M(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n){e.classList[n?"add":"remove"](t)}let X;function j(e){X=e}const O=[],ee=[],K=[],te=[],he=Promise.resolve();let Q=!1;function ge(){Q||(Q=!0,he.then(se))}function U(e){K.push(e)}const J=new Set;let S=0;function se(){const e=X;do{for(;S<O.length;){const t=O[S];S++,j(t),_e(t.$$)}for(j(null),O.length=0,S=0;ee.length;)ee.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];J.has(n)||(J.add(n),n())}K.length=0}while(O.length);for(;te.length;)te.pop()();Q=!1,J.clear(),j(e)}function _e(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}const P=new Set;let N;function ae(){N={r:0,c:[],p:N}}function ce(){N.r||B(N.c),N=N.p}function k(e,t){e&&e.i&&(P.delete(e),e.i(t))}function E(e,t,n,l){if(e&&e.o){if(P.has(e))return;P.add(e),N.c.push(()=>{P.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Y(e){e&&e.c()}function W(e,t,n,l){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),l||U(()=>{const s=e.$$.on_mount.map(fe).filter(V);e.$$.on_destroy?e.$$.on_destroy.push(...s):B(s),e.$$.on_mount=[]}),i.forEach(U)}function R(e,t){const n=e.$$;n.fragment!==null&&(B(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ve(e,t){e.$$.dirty[0]===-1&&(O.push(e),ge(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function z(e,t,n,l,o,i,s,h=[-1]){const u=X;j(e);const a=e.$$={fragment:null,ctx:[],props:i,update:G,not_equal:o,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Z(),dirty:h,skip_bound:!1,root:t.target||u.$$.root};s&&s(a.root);let _=!1;if(a.ctx=n?n(e,t.props||{},(f,c,...C)=>{const r=C.length?C[0]:c;return a.ctx&&o(a.ctx[f],a.ctx[f]=r)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](r),_&&ve(e,f)),c}):[],a.update(),_=!0,B(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const f=me(t.target);a.fragment&&a.fragment.l(f),f.forEach(F)}else a.fragment&&a.fragment.c();t.intro&&k(e.$$.fragment),W(e,t.target,t.anchor,t.customElement),se()}j(u)}class H{$destroy(){R(this,1),this.$destroy=G}$on(t,n){if(!V(n))return G;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!de(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ye(e){let t,n,l,o,i,s,h;return{c(){t=p("button"),n=D(e[0]),l=L(),o=p("sub"),i=D(e[1]),g(t,"class","key svelte-1lv5b5w"),$(t,"pressed",e[2])},m(u,a){T(u,t,a),v(t,n),v(t,l),v(t,o),v(o,i),s||(h=[b(t,"mousedown",e[3]),b(t,"mouseup",e[4]),b(t,"mouseover",e[3]),b(t,"mouseleave",e[4]),b(t,"focus",e[3]),b(t,"touchstart",e[3]),b(t,"touchend",e[4]),b(t,"touchcancel",e[4]),b(t,"touchmove",e[3]),b(t,"dragenter",e[3]),b(t,"dragleave",e[4]),b(t,"dragend",e[4])],s=!0)},p(u,[a]){a&1&&M(n,u[0]),a&2&&M(i,u[1]),a&4&&$(t,"pressed",u[2])},i:G,o:G,d(u){u&&F(t),s=!1,B(h)}}}function be(e,t,n){let{note:l}=t,{octave:o}=t,{freq:i}=t,{audioContext:s}=t,{mainGainNode:h}=t,{oscList:u}=t,{waveType:a}=t,_=!1;function f(){const r=s.createOscillator();r.connect(h);const w=a;return r.type=w,r.frequency.value=i,r.start(),r}function c(r){if(r.preventDefault(),(r.buttons===1||r.touches.length===1)&&!_){const w=Number(o);n(5,u[w][l]=f(),u),n(2,_=!0),console.log("playing tone")}}function C(r){if(_){const w=Number(o);u[w][l].stop(),delete u[w][l],n(2,_=!1)}}return e.$$set=r=>{"note"in r&&n(0,l=r.note),"octave"in r&&n(1,o=r.octave),"freq"in r&&n(6,i=r.freq),"audioContext"in r&&n(7,s=r.audioContext),"mainGainNode"in r&&n(8,h=r.mainGainNode),"oscList"in r&&n(5,u=r.oscList),"waveType"in r&&n(9,a=r.waveType)},[l,o,_,c,C,u,i,s,h,a]}class Ce extends H{constructor(t){super(),z(this,t,be,ye,I,{note:0,octave:1,freq:6,audioContext:7,mainGainNode:8,oscList:5,waveType:9})}}function pe(){const e=[];for(let t=0;t<9;t++)e[t]=[];return e[0].A=27.5,e[0]["A#"]=29.13523509488062,e[0].B=30.867706328507754,e[1].C=32.70319566257483,e[1]["C#"]=34.64782887210901,e[1].D=36.70809598967595,e[1]["D#"]=38.890872965260115,e[1].E=41.20344461410874,e[1].F=43.653528929125486,e[1]["F#"]=46.2493028389543,e[1].G=48.99942949771866,e[1]["G#"]=51.91308719749314,e[1].A=55,e[1]["A#"]=58.27047018976124,e[1].B=61.735412657015516,e[2].C=65.41,e[2]["C#"]=69.3,e[2].D=73.42,e[2]["D#"]=77.78,e[2].E=82.41,e[2].F=87.31,e[2]["F#"]=92.5,e[2].G=98,e[2]["G#"]=103.83,e[2].A=110,e[2]["A#"]=116.54,e[2].B=123.47,e[3].C=130.81,e[3]["C#"]=138.59,e[3].D=146.83,e[3]["D#"]=155.56,e[3].E=164.81,e[3].F=174.61,e[3]["F#"]=185,e[3].G=196,e[3]["G#"]=207.65,e[3].A=220,e[3]["A#"]=233.08,e[3].B=246.94,e[4].C=261.63,e[4]["C#"]=277.18,e[4].D=293.66,e[4]["D#"]=311.13,e[4].E=329.63,e[4].F=349.23,e[4]["F#"]=369.99,e[4].G=392,e[4]["G#"]=415.3,e[4].A=440,e[4]["A#"]=466.16,e[4].B=493.88,e[5].C=523.25,e[5]["C#"]=554.37,e[5].D=587.33,e[5]["D#"]=622.25,e[5].E=659.25,e[5].F=698.46,e[5]["F#"]=739.99,e[5].G=783.99,e[5]["G#"]=830.61,e[5].A=880,e[5]["A#"]=923.33,e[5].B=987.77,e[6].C=1046.5,e[6]["C#"]=1108.73,e[6].D=1174.66,e[6]["D#"]=1244.51,e[6].E=1318.51,e[6].F=1396.91,e[6]["F#"]=1479.98,e[6].G=1567.98,e[6]["G#"]=1661.22,e[6].A=1760,e[6]["A#"]=1864.66,e[6].B=1975.53,e[7].C=2093.004522404789,e[7]["C#"]=2217.4610478149766,e[7].D=2349.3181433392606,e[7]["D#"]=2489.0158697766474,e[7].E=2637.0204553029594,e[7].F=2793.825851464031,e[7]["F#"]=2959.955381693075,e[7].G=3135.963487853994,e[7]["G#"]=3322.437580639561,e[7].A=3520,e[7]["A#"]=3729.3100921447194,e[7].B=3951.066410048993,e[8].C=4186.009044809578,e}function we(e){let t,n,l,o,i,s,h,u,a,_;return{c(){t=p("div"),n=p("label"),l=D(e[2]),o=L(),i=p("strong"),s=D(e[6]),h=L(),u=p("input"),g(i,"class","value"),g(n,"for",e[0]),g(u,"type",e[1]),g(u,"id",e[0]),g(u,"name",e[0]),g(u,"min",e[3]),g(u,"max",e[4]),u.value=e[6],g(u,"step",e[5]),g(t,"class","control-group")},m(f,c){T(f,t,c),v(t,n),v(n,l),v(n,o),v(n,i),v(i,s),v(t,h),v(t,u),a||(_=b(u,"change",function(){V(e[7])&&e[7].apply(this,arguments)}),a=!0)},p(f,[c]){e=f,c&4&&M(l,e[2]),c&64&&M(s,e[6]),c&1&&g(n,"for",e[0]),c&2&&g(u,"type",e[1]),c&1&&g(u,"id",e[0]),c&1&&g(u,"name",e[0]),c&8&&g(u,"min",e[3]),c&16&&g(u,"max",e[4]),c&64&&u.value!==e[6]&&(u.value=e[6]),c&32&&g(u,"step",e[5])},i:G,o:G,d(f){f&&F(t),a=!1,_()}}}function Ae(e,t,n){let{name:l=""}=t,{type:o="range"}=t,{label:i=""}=t,{min:s=0}=t,{max:h=2}=t,{step:u=.1}=t,{value:a=.5}=t,{onChange:_=()=>{}}=t;return e.$$set=f=>{"name"in f&&n(0,l=f.name),"type"in f&&n(1,o=f.type),"label"in f&&n(2,i=f.label),"min"in f&&n(3,s=f.min),"max"in f&&n(4,h=f.max),"step"in f&&n(5,u=f.step),"value"in f&&n(6,a=f.value),"onChange"in f&&n(7,_=f.onChange)},[l,o,i,s,h,u,a,_]}class ke extends H{constructor(t){super(),z(this,t,Ae,we,I,{name:0,type:1,label:2,min:3,max:4,step:5,value:6,onChange:7})}}function ne(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function le(e,t,n){const l=e.slice();return l[12]=t[n],l}function oe(e){let t,n=e[12]+"",l;return{c(){t=p("option"),l=D(n),t.__value=e[12],t.value=t.__value},m(o,i){T(o,t,i),v(t,l)},p:G,d(o){o&&F(t)}}}function ie(e){let t,n;return t=new Ce({props:{note:e[9][0],octave:e[9][2],freq:e[9][1],audioContext:e[2],mainGainNode:e[0],oscList:e[3],waveType:e[1]}}),{c(){Y(t.$$.fragment)},m(l,o){W(t,l,o),n=!0},p(l,o){const i={};o&1&&(i.mainGainNode=l[0]),o&2&&(i.waveType=l[1]),t.$set(i)},i(l){n||(k(t.$$.fragment,l),n=!0)},o(l){E(t.$$.fragment,l),n=!1},d(l){R(t,l)}}}function Ge(e){let t,n,l,o,i,s,h,u,a,_;l=new ke({props:{name:"gain",label:"Gain",onChange:e[6],value:e[0].gain.value,max:10,step:1}});let f=e[4],c=[];for(let d=0;d<f.length;d+=1)c[d]=oe(le(e,f,d));let C=e[5],r=[];for(let d=0;d<C.length;d+=1)r[d]=ie(ne(e,C,d));const w=d=>E(r[d],1,1,()=>{r[d]=null});return{c(){t=p("section"),n=p("div"),Y(l.$$.fragment),o=L(),i=p("select");for(let d=0;d<c.length;d+=1)c[d].c();s=L(),h=p("div");for(let d=0;d<r.length;d+=1)r[d].c();g(i,"class","svelte-1kjgiwt"),g(n,"class","controls svelte-1kjgiwt"),g(t,"class","keyboard svelte-1kjgiwt")},m(d,y){T(d,t,y),v(t,n),W(l,n,null),v(n,o),v(n,i);for(let A=0;A<c.length;A+=1)c[A].m(i,null);v(t,s),v(t,h);for(let A=0;A<r.length;A+=1)r[A].m(h,null);u=!0,a||(_=b(i,"change",e[7]),a=!0)},p(d,[y]){const A={};if(y&1&&(A.value=d[0].gain.value),l.$set(A),y&16){f=d[4];let m;for(m=0;m<f.length;m+=1){const q=le(d,f,m);c[m]?c[m].p(q,y):(c[m]=oe(q),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=f.length}if(y&47){C=d[5];let m;for(m=0;m<C.length;m+=1){const q=ne(d,C,m);r[m]?(r[m].p(q,y),k(r[m],1)):(r[m]=ie(q),r[m].c(),k(r[m],1),r[m].m(h,null))}for(ae(),m=C.length;m<r.length;m+=1)w(m);ce()}},i(d){if(!u){k(l.$$.fragment,d);for(let y=0;y<C.length;y+=1)k(r[y]);u=!0}},o(d){E(l.$$.fragment,d),r=r.filter(Boolean);for(let y=0;y<r.length;y+=1)E(r[y]);u=!1},d(d){d&&F(t),R(l),x(c,d),x(r,d),a=!1,_()}}}let Ne=5;function Ee(e,t,n){const l=new AudioContext,o=[{},{},{},{},{},{},{},{},{},{},{},{}],i=l.createGain(),s=["square","sine","sawtooth","triangle","custom"];let h=s[0];const u=pe();let a=[];i.connect(l.destination),i.gain.value=Ne,u.forEach((c,C)=>{Object.entries(c).forEach((w,d)=>{w.push(d),a.push(w)})});function _(c){n(0,i.gain.value=Math.round(1e3*Number(c.target.value))/1e3,i)}function f(c){n(1,h=c.target.value)}return[i,h,l,o,s,a,_,f]}class Fe extends H{constructor(t){super(),z(this,t,Ee,Ge,I,{})}}function re(e){let t,n,l;return{c(){t=p("button"),t.textContent="Show me the keyboard!!!"},m(o,i){T(o,t,i),n||(l=b(t,"click",e[1]),n=!0)},p:G,d(o){o&&F(t),n=!1,l()}}}function ue(e){let t,n;return t=new Fe({}),{c(){Y(t.$$.fragment)},m(l,o){W(t,l,o),n=!0},i(l){n||(k(t.$$.fragment,l),n=!0)},o(l){E(t.$$.fragment,l),n=!1},d(l){R(t,l)}}}function De(e){let t,n,l,o=e[0]===!1&&re(e),i=e[0]===!0&&ue();return{c(){t=p("main"),o&&o.c(),n=L(),i&&i.c()},m(s,h){T(s,t,h),o&&o.m(t,null),v(t,n),i&&i.m(t,null),l=!0},p(s,[h]){s[0]===!1?o?o.p(s,h):(o=re(s),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s[0]===!0?i?h&1&&k(i,1):(i=ue(),i.c(),k(i,1),i.m(t,null)):i&&(ae(),E(i,1,1,()=>{i=null}),ce())},i(s){l||(k(i),l=!0)},o(s){E(i),l=!1},d(s){s&&F(t),o&&o.d(),i&&i.d()}}}function Le(e,t,n){let l=!1;return[l,()=>n(0,l=!0)]}class Be extends H{constructor(t){super(),z(this,t,Le,De,I,{})}}new Be({target:document.getElementById("app")});
